@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================
   üé® Refined Minimal Design System
   ========================================== */

/* Geist Â≠ó‰ΩìÂºïÂÖ• */
@font-face {
  font-family: 'Geist';
  src: url('https://cdn.jsdelivr.net/npm/geist@1.2.0/dist/fonts/geist-sans/Geist-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist';
  src: url('https://cdn.jsdelivr.net/npm/geist@1.2.0/dist/fonts/geist-sans/Geist-Medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist';
  src: url('https://cdn.jsdelivr.net/npm/geist@1.2.0/dist/fonts/geist-sans/Geist-SemiBold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Mono';
  src: url('https://cdn.jsdelivr.net/npm/geist@1.2.0/dist/fonts/geist-mono/GeistMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@layer base {
  :root {
    /* ÊµÖËâ≤‰∏ªÈ¢ò CSS ÂèòÈáè */
    --color-bg-primary: #fafaf9;
    --color-bg-secondary: #ffffff;
    --color-bg-tertiary: #f5f5f4;
    --color-bg-elevated: #ffffff;
    --color-bg-overlay: rgba(255, 255, 255, 0.8);

    --color-text-primary: #1c1917;
    --color-text-secondary: #57534e;
    --color-text-tertiary: #78716c;
    --color-text-muted: #a8a29e;

    --color-border-default: #e7e5e4;
    --color-border-subtle: #f5f5f4;
    --color-border-strong: #d6d3d1;

    --color-accent: #6366f1;
    --color-accent-hover: #4f46e5;
    --color-accent-subtle: #f0f4ff;

    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.04), 0 1px 2px -1px rgb(0 0 0 / 0.03);
    --shadow-card-hover: 0 4px 6px -1px rgb(0 0 0 / 0.06), 0 2px 4px -2px rgb(0 0 0 / 0.04);
  }

  .dark {
    /* Ê∑±Ëâ≤‰∏ªÈ¢ò CSS ÂèòÈáè */
    --color-bg-primary: #0c0a09;
    --color-bg-secondary: #1c1917;
    --color-bg-tertiary: #292524;
    --color-bg-elevated: #292524;
    --color-bg-overlay: rgba(28, 25, 23, 0.9);

    --color-text-primary: #fafaf9;
    --color-text-secondary: #d6d3d1;
    --color-text-tertiary: #a8a29e;
    --color-text-muted: #78716c;

    --color-border-default: #292524;
    --color-border-subtle: #1c1917;
    --color-border-strong: #44403c;

    --color-accent: #818cf8;
    --color-accent-hover: #a5b4fc;
    --color-accent-subtle: #312e81;

    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.2), 0 1px 2px -1px rgb(0 0 0 / 0.15);
    --shadow-card-hover: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.2);
  }

  html {
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-neutral-50 text-neutral-900 font-sans antialiased;
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  .dark body {
    @apply bg-neutral-950 text-neutral-50;
  }

  /* ÂèØËÆøÈóÆÊÄßÔºöÂáèÂ∞ëÂä®Áîª */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.001ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.001ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Focus Ê†∑Âºè */
  :focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* ÈÄâ‰∏≠ÊñáÊú¨ */
  ::selection {
    background-color: var(--color-accent-subtle);
    color: var(--color-text-primary);
  }
}

@layer components {
  /* ==========================================
     Âç°ÁâáÁªÑ‰ª∂
     ========================================== */
  .card {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.75rem;
    box-shadow: var(--shadow-card);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card:hover {
    box-shadow: var(--shadow-card-hover);
    border-color: var(--color-border-strong);
  }

  .card-glass {
    background: var(--color-bg-overlay);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--color-border-subtle);
    border-radius: 0.75rem;
  }

  /* ==========================================
     ÊåâÈíÆÁªÑ‰ª∂
     ========================================== */
  .btn {
    @apply inline-flex items-center justify-center gap-2;
    @apply px-4 py-2 rounded-lg font-medium text-sm;
    @apply transition-all duration-150 ease-smooth;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-500 focus-visible:ring-offset-2;
  }

  .btn-primary {
    @apply bg-accent-600 text-white;
    @apply hover:bg-accent-700 active:bg-accent-800;
    @apply shadow-soft hover:shadow-medium;
  }

  .dark .btn-primary {
    @apply bg-accent-500 hover:bg-accent-400;
  }

  .btn-secondary {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-default);
  }

  .btn-secondary:hover {
    background: var(--color-bg-elevated);
    border-color: var(--color-border-strong);
  }

  .btn-ghost {
    @apply bg-transparent text-neutral-600 dark:text-neutral-400;
    @apply hover:bg-neutral-100 dark:hover:bg-neutral-800;
  }

  .btn-icon {
    @apply p-2 rounded-lg;
    @apply text-neutral-500 dark:text-neutral-400;
    @apply hover:bg-neutral-100 dark:hover:bg-neutral-800;
    @apply hover:text-neutral-700 dark:hover:text-neutral-200;
    @apply transition-all duration-150;
  }

  .btn-icon:active {
    @apply scale-95;
  }

  /* ==========================================
     ËæìÂÖ•Ê°ÜÁªÑ‰ª∂
     ========================================== */
  .input {
    @apply w-full px-3 py-2 rounded-lg;
    @apply text-sm font-normal;
    @apply transition-all duration-150;
    background: var(--color-bg-tertiary);
    border: 1px solid transparent;
    color: var(--color-text-primary);
  }

  .input::placeholder {
    color: var(--color-text-muted);
  }

  .input:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-border-default);
  }

  .input:focus {
    @apply outline-none ring-2 ring-accent-500/20;
    background: var(--color-bg-secondary);
    border-color: var(--color-accent);
  }

  /* ÊêúÁ¥¢Ê°Ü */
  .search-input {
    @apply pl-10 pr-10;
    background: var(--color-bg-tertiary);
    border-radius: 9999px;
  }

  .search-input:focus {
    @apply ring-2 ring-accent-500/20;
    background: var(--color-bg-secondary);
    border-color: var(--color-accent);
  }

  /* ==========================================
     Ê†áÁ≠æÁªÑÁªÑ‰ª∂
     ========================================== */
  .tab-group-card {
    @apply rounded-xl overflow-hidden;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-subtle);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .tab-group-card:hover {
    border-color: var(--color-border-default);
    box-shadow: var(--shadow-card-hover);
  }

  .tab-group-header {
    @apply flex items-center justify-between px-4 py-3;
    background: var(--color-bg-tertiary);
    border-bottom: 1px solid var(--color-border-subtle);
  }

  .tab-group-title {
    @apply text-base font-semibold;
    color: var(--color-text-primary);
  }

  .tab-group-count {
    @apply text-xs font-medium px-2 py-0.5 rounded-full;
    background: var(--color-accent-subtle);
    color: var(--color-accent);
  }

  .dark .tab-group-count {
    background: rgba(99, 102, 241, 0.15);
    color: #a5b4fc;
  }

  /* ==========================================
     Ê†áÁ≠æÈ°πÁªÑ‰ª∂
     ========================================== */
  .tab-item {
    @apply flex items-center gap-3 px-4 py-2.5;
    @apply cursor-pointer transition-all duration-150;
    border-bottom: 1px solid var(--color-border-subtle);
  }

  .tab-item:last-child {
    border-bottom: none;
  }

  .tab-item:hover {
    background: var(--color-bg-tertiary);
  }

  .tab-item:active {
    background: var(--color-bg-tertiary);
  }

  .tab-item-favicon {
    @apply w-4 h-4 rounded flex-shrink-0;
    @apply bg-neutral-200 dark:bg-neutral-700;
  }

  .tab-item-title {
    @apply flex-1 truncate text-sm;
    color: var(--color-text-primary);
  }

  .tab-item-url {
    @apply text-xs truncate max-w-[200px];
    color: var(--color-text-muted);
  }

  .tab-item-actions {
    @apply flex items-center gap-1 opacity-0 transition-opacity duration-150;
  }

  .tab-item:hover .tab-item-actions {
    @apply opacity-100;
  }

  /* ==========================================
     ÂæΩÁ´†ÁªÑ‰ª∂
     ========================================== */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-full;
    @apply text-xs font-medium;
  }

  .badge-accent {
    background: var(--color-accent-subtle);
    color: var(--color-accent);
  }

  .badge-success {
    @apply bg-success-50 text-success-600 dark:bg-success-600/20 dark:text-success-500;
  }

  .badge-warning {
    @apply bg-warning-50 text-warning-600 dark:bg-warning-600/20 dark:text-warning-500;
  }

  .badge-danger {
    @apply bg-danger-50 text-danger-600 dark:bg-danger-600/20 dark:text-danger-500;
  }

  /* ==========================================
     Á©∫Áä∂ÊÄÅÁªÑ‰ª∂
     ========================================== */
  .empty-state {
    @apply flex flex-col items-center justify-center py-16 px-8;
  }

  .empty-state-icon {
    @apply w-16 h-16 rounded-2xl mb-6;
    @apply flex items-center justify-center;
    background: linear-gradient(135deg, var(--color-bg-tertiary) 0%, var(--color-bg-secondary) 100%);
    border: 1px solid var(--color-border-default);
  }

  .empty-state-title {
    @apply text-lg font-semibold mb-2;
    color: var(--color-text-primary);
  }

  .empty-state-description {
    @apply text-sm text-center max-w-sm;
    color: var(--color-text-secondary);
  }

  /* ==========================================
     Â§¥ÈÉ®Â∏ÉÂ±Ä
     ========================================== */
  .header {
    @apply sticky top-0 z-50;
    background: var(--color-bg-overlay);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--color-border-subtle);
  }

  .header-container {
    @apply flex items-center justify-between gap-4 px-6 py-3;
    @apply max-w-7xl mx-auto;
  }

  /* ==========================================
     Â∏ÉÂ±ÄÂÆπÂô®
     ========================================== */
  .layout-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6;
  }

  .layout-single-width {
    @apply max-w-3xl mx-auto;
  }

  .layout-double-width {
    @apply max-w-6xl mx-auto;
  }

  /* ÂèåÊ†èÁΩëÊ†º */
  .double-column-layout {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4;
  }

  /* ÂçïÊ†èÂ∏ÉÂ±Ä */
  .single-column-layout {
    @apply space-y-3;
  }

  /* ==========================================
     ÊãñÊãΩÁõ∏ÂÖ≥
     ========================================== */
  .dragging {
    @apply opacity-50 scale-[1.02];
    @apply ring-2 ring-accent-500/30;
    @apply shadow-elevated;
    border-radius: 0.5rem;
  }

  .drag-over {
    @apply ring-2 ring-accent-500;
    background: var(--color-accent-subtle) !important;
  }

  .drop-indicator {
    @apply h-0.5 bg-accent-500 rounded-full;
    @apply animate-pulse-soft;
  }

  /* ==========================================
     Âä®ÁîªÁ±ª
     ========================================== */
  .animate-in {
    animation: fadeInUp 0.3s ease-out forwards;
  }

  .animate-out {
    animation: fadeOut 0.2s ease-out forwards;
  }

  @keyframes fadeOut {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(-8px); }
  }

  /* ‰∫§ÈîôÂä®Áîª */
  .stagger-1 { animation-delay: 0.05s; }
  .stagger-2 { animation-delay: 0.1s; }
  .stagger-3 { animation-delay: 0.15s; }
  .stagger-4 { animation-delay: 0.2s; }
  .stagger-5 { animation-delay: 0.25s; }

  /* ==========================================
     Â∑•ÂÖ∑ÊèêÁ§∫
     ========================================== */
  .tooltip {
    @apply absolute z-50 px-2 py-1 rounded-md;
    @apply text-xs font-medium whitespace-nowrap;
    @apply animate-fade-in;
    background: var(--color-bg-elevated);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-default);
    box-shadow: var(--shadow-card-hover);
  }

  /* ==========================================
     ÊªöÂä®Êù°Ê†∑Âºè
     ========================================== */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-border-strong);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
  }

  /* ==========================================
     ÂêëÂêéÂÖºÂÆπÁöÑÊóßÁ±ªÂêç
     ========================================== */
  .flat-card {
    @apply card;
  }

  .flat-button-primary {
    @apply btn btn-primary;
  }

  .flat-button-secondary {
    @apply btn btn-secondary;
  }

  .flat-interaction {
    @apply transition-all duration-150;
  }

  .flat-interaction:hover {
    @apply -translate-y-px;
  }

  .flat-interaction:active {
    @apply translate-y-0;
  }

  .flat-text-primary {
    color: var(--color-text-primary);
    @apply text-base font-semibold;
  }

  .flat-text-secondary {
    color: var(--color-text-secondary);
    @apply text-sm font-medium;
  }

  .flat-text-tertiary {
    color: var(--color-text-tertiary);
    @apply text-sm;
  }

  .transition-material {
    @apply transition-all duration-200 ease-smooth;
  }
}

/* ==========================================
   Ê®°ÊÄÅÊ°ÜÂä®Áîª
   ========================================== */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.animate-fadeIn {
  animation: fadeIn 0.2s ease-out forwards;
}

.animate-scaleIn {
  animation: scaleIn 0.2s ease-out forwards;
}
