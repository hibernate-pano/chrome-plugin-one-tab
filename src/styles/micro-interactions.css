/* ==========================================
   ⚡ TabVault Pro 微交互系统
   快速响应 (50-100ms) + 触觉反馈
   ========================================== */

/*
 * 设计原则：
 * 1. 响应时间控制在 50-100ms（人眼感知最佳）
 * 2. 所有交互提供视觉和"触觉"反馈
 * 3. 使用品牌色（Teal）增强识别度
 * 4. 支持 prefers-reduced-motion
 */

@layer components {
  /* ==========================================
     按钮微交互 - 橙色 CTA
     ========================================== */

  .btn-primary {
    @apply relative overflow-hidden;
    background: var(--color-accent, #0D9488);
    transition: all 80ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    background: var(--color-accent-hover, #0F766E);
    transition: opacity 80ms ease-out;
  }

  .btn-primary:hover::before {
    opacity: 1;
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px -2px rgba(13, 148, 136, 0.4);
  }

  .btn-primary:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px -1px rgba(13, 148, 136, 0.3);
  }

  /* CTA按钮 - 橙色强调 */
  .btn-cta {
    @apply relative overflow-hidden;
    background: var(--color-cta, #F97316);
    transition: all 80ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-cta::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    background: var(--color-cta-hover, #EA580C);
    transition: opacity 80ms ease-out;
  }

  .btn-cta:hover::before {
    opacity: 1;
  }

  .btn-cta:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px -2px rgba(249, 115, 22, 0.4);
  }

  .btn-cta:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px -1px rgba(249, 115, 22, 0.3);
  }

  /* ==========================================
     图标按钮 - 快速响应
     ========================================== */

  .btn-icon {
    @apply relative;
    transition: all 60ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .btn-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 0.5rem;
    opacity: 0;
    background: var(--color-bg-tertiary, rgba(13, 148, 136, 0.08));
    transition: opacity 60ms ease-out;
  }

  .btn-icon:hover::after {
    opacity: 1;
  }

  .btn-icon:active {
    transform: scale(0.96);
  }

  /* ==========================================
     卡片微交互
     ========================================== */

  .tab-group-card {
    @apply relative;
    transition: all 120ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: default;
  }

  .tab-group-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 0.75rem;
    opacity: 0;
    pointer-events: none;
    box-shadow: 0 4px 12px -2px rgba(13, 148, 136, 0.15);
    transition: opacity 100ms ease-out;
  }

  .tab-group-card:hover::before {
    opacity: 1;
  }

  .tab-group-card:hover {
    transform: translateY(-2px);
  }

  /* ==========================================
     标签项微交互
     ========================================== */

  .tab-item {
    @apply relative;
    transition: all 80ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .tab-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0.25rem;
    opacity: 0;
    background: linear-gradient(180deg, #14B8A6 0%, #0D9488 100%);
    transition: opacity 80ms ease-out;
  }

  .tab-item:hover::before {
    opacity: 1;
  }

  .tab-item:hover {
    background: var(--color-bg-tertiary, rgba(13, 148, 136, 0.04));
  }

  .tab-item:active {
    background: var(--color-bg-tertiary, rgba(13, 148, 136, 0.08));
    transform: scale(0.995);
  }

  /* ==========================================
     搜索框微交互
     ========================================== */

  .search-input {
    transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .search-input:hover {
    background: var(--color-bg-secondary, #FFFFFF);
    box-shadow: 0 2px 8px -2px rgba(13, 148, 136, 0.08);
  }

  .search-input:focus {
    background: var(--color-bg-secondary, #FFFFFF);
    box-shadow:
      0 0 0 3px rgba(13, 148, 136, 0.1),
      0 2px 12px -2px rgba(13, 148, 136, 0.15);
    transform: scale(1.01);
  }

  /* 搜索清除按钮 */
  .search-clear-btn {
    transition: all 60ms ease-out;
  }

  .search-clear-btn:hover {
    transform: scale(1.15) rotate(90deg);
  }

  .search-clear-btn:active {
    transform: scale(1.05) rotate(90deg);
  }

  /* ==========================================
     加载状态微交互
     ========================================== */

  @keyframes micro-pulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.05);
    }
  }

  .loading-pulse {
    animation: micro-pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* ==========================================
     拖拽微交互
     ========================================== */

  .dragging {
    transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0.6;
    transform: scale(1.03);
    box-shadow:
      0 8px 24px -4px rgba(13, 148, 136, 0.2),
      0 0 0 2px rgba(13, 148, 136, 0.5);
    cursor: grabbing !important;
  }

  .drag-over {
    background: rgba(13, 148, 136, 0.08) !important;
    box-shadow: inset 0 0 0 2px rgba(13, 148, 136, 0.4);
    transition: all 80ms ease-out;
  }

  /* ==========================================
     Tooltip 微交互
     ========================================== */

  .tooltip {
    opacity: 0;
    transform: scale(0.95);
    transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }

  .tooltip.show {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
  }

  /* ==========================================
     成功/错误状态微动画
     ========================================== */

  @keyframes success-bounce {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }

  .success-feedback {
    animation: success-bounce 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes error-shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-4px);
    }
    75% {
      transform: translateX(4px);
    }
  }

  .error-feedback {
    animation: error-shake 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* ==========================================
     计数器微动画
     ========================================== */

  @keyframes count-pop {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
    }
  }

  .count-update {
    animation: count-pop 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* ==========================================
     减少动画偏好支持
     ========================================== */

  @media (prefers-reduced-motion: reduce) {
    .btn-primary,
    .btn-icon,
    .tab-group-card,
    .tab-item,
    .search-input,
    .search-clear-btn,
    .tooltip,
    .dragging,
    .drag-over {
      transition: none !important;
      animation: none !important;
      transform: none !important;
    }

    .btn-primary:hover,
    .tab-group-card:hover,
    .tab-item:hover,
    .search-input:focus {
      transform: none !important;
    }
  }
}

/* ==========================================
   辅助类 - 快速应用微交互
   ========================================== */

@layer utilities {
  /* 快速悬停效果 */
  .micro-hover {
    transition: all 80ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .micro-hover:hover {
    transform: translateY(-1px);
  }

  /* 快速按下效果 */
  .micro-active:active {
    transform: scale(0.97);
  }

  /* 发光效果 */
  .micro-glow {
    box-shadow: 0 0 20px -5px rgba(13, 148, 136, 0.3);
  }

  /* 脉冲效果 */
  .micro-pulse {
    animation: micro-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* 触觉点击 */
  .micro-tap {
    transition: transform 60ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .micro-tap:active {
    transform: scale(0.96);
  }
}
