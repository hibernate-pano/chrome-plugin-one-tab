# OneTab Plus 新手引导系统使用指南

## 概述

OneTab Plus 的新手引导系统为首次使用的用户提供交互式引导体验，帮助用户快速了解和掌握扩展的核心功能。

## 功能特性

### 自动触发
- 首次安装扩展时自动启动引导
- 检测用户是否为首次使用
- 智能跳过已完成的操作

### 交互式引导
- 聚光灯效果高亮目标元素
- 智能定位提示框位置
- 支持键盘和鼠标操作
- 实时进度显示

### 灵活控制
- 支持跳过单个步骤
- 允许随时退出引导
- 提供重新开始选项
- 状态持久化保存

## 引导流程

### 第一步：欢迎介绍
- **目标**: 建立第一印象，说明扩展价值
- **内容**: 欢迎信息和功能概述
- **操作**: 点击"开始引导"继续

### 第二步：保存当前标签
- **目标**: 体验核心功能
- **内容**: 指导用户点击"保存所有标签"按钮
- **操作**: 必须点击按钮才能继续
- **效果**: 创建第一个标签组

### 第三步：查看标签组
- **目标**: 了解标签组管理
- **内容**: 介绍标签组的结构和功能
- **操作**: 点击展开按钮查看标签列表

### 第四步：标签操作
- **目标**: 学习标签基本操作
- **内容**: 介绍点击重新打开、删除等功能
- **操作**: 点击任意标签项

### 第五步：搜索功能
- **目标**: 掌握搜索和过滤
- **内容**: 演示搜索框的使用方法
- **操作**: 在搜索框中输入关键词

### 第六步：高级功能
- **目标**: 了解设置和同步
- **内容**: 介绍设置面板和云端同步
- **操作**: 查看设置选项

## 使用方法

### 自动启动
引导系统会在以下情况自动启动：
1. 首次安装扩展
2. 检测到用户从未完成过引导
3. 页面加载完成后延迟1秒启动

### 手动启动
用户可以通过以下方式手动启动引导：
1. 点击右上角菜单按钮
2. 在下拉菜单中选择"重新开始引导"（仅开发环境可见）
3. 或在设置中找到引导选项

### 键盘快捷键
- `Esc`: 退出引导
- `→` 或 `Enter`: 下一步
- `←`: 上一步
- `Tab`: 跳过当前步骤（如果允许）

## 开发者指南

### 添加新的引导步骤

1. **更新步骤定义**
```typescript
// 在 onboardingSlice.ts 中添加新步骤
const newStep: OnboardingStep = {
  id: 'new-feature',
  title: '新功能标题',
  description: '新功能描述',
  targetElement: '[data-onboarding="new-feature"]',
  position: 'bottom',
  action: 'click',
  canSkip: true,
};
```

2. **添加目标元素标识**
```tsx
// 在目标组件中添加 data-onboarding 属性
<button data-onboarding="new-feature">
  新功能按钮
</button>
```

3. **更新进度跟踪**
```typescript
// 在 OnboardingProvider 中添加进度检测
case 'new-feature':
  dispatch(updateUserProgress({ hasUsedNewFeature: true }));
  dispatch(completeStep({ stepId: 'new-feature' }));
  break;
```

### 自定义引导样式

引导系统支持自定义样式：

```css
/* 自定义聚光灯颜色 */
.spotlight-border {
  border-color: #your-color;
  box-shadow: 0 0 20px rgba(your-color, 0.5);
}

/* 自定义提示框样式 */
.onboarding-tooltip {
  background: your-background;
  border: your-border;
}
```

### 配置选项

```tsx
<OnboardingSystem
  autoStart={true}              // 是否自动开始
  storageKey="custom-key"       // 本地存储键名
  className="custom-class"      // 自定义样式类
>
  <YourApp />
</OnboardingSystem>
```

## 测试和调试

### 开发环境测试
1. 打开浏览器开发者工具
2. 在右下角查看性能监控面板
3. 使用引导测试控制台（开发环境）

### 重置引导状态
```javascript
// 在浏览器控制台中执行
localStorage.removeItem('onetab-onboarding-state');
location.reload();
```

### 调试信息
引导系统在开发环境下会输出详细的调试信息：
- 步骤切换日志
- 用户进度更新
- 错误和警告信息

## 最佳实践

### 引导设计原则
1. **简洁明了**: 每个步骤只关注一个核心功能
2. **循序渐进**: 按照用户使用流程安排步骤顺序
3. **可跳过性**: 允许有经验的用户快速跳过
4. **非侵入性**: 不阻止用户正常使用应用

### 内容编写建议
1. **使用简单语言**: 避免技术术语
2. **突出价值**: 说明功能的好处而非操作步骤
3. **保持简短**: 每个描述控制在50字以内
4. **提供上下文**: 解释为什么要执行某个操作

### 性能优化
1. **懒加载**: 引导组件按需加载
2. **状态缓存**: 避免重复计算
3. **事件节流**: 限制频繁的位置更新
4. **内存管理**: 及时清理事件监听器

## 故障排除

### 常见问题

**Q: 引导没有自动启动**
A: 检查是否为首次使用，或清除本地存储重试

**Q: 聚光灯位置不正确**
A: 确认目标元素的 data-onboarding 属性设置正确

**Q: 键盘快捷键不工作**
A: 确保引导处于激活状态且焦点在正确位置

**Q: 引导状态没有保存**
A: 检查浏览器是否支持 localStorage

### 错误处理
引导系统包含完善的错误处理机制：
- 目标元素不存在时的降级处理
- 网络错误时的重试机制
- 状态同步失败时的本地备份

## 更新日志

### v1.0.0
- 初始版本发布
- 支持6个核心引导步骤
- 实现聚光灯效果和智能定位
- 添加键盘导航支持

### 未来计划
- 添加引导视频支持
- 实现个性化引导路径
- 支持多语言国际化
- 添加引导效果分析
