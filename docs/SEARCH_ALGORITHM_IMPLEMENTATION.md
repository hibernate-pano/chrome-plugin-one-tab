# OneTab Plus - é«˜çº§æœç´¢ç®—æ³•å®ç°

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å®ç°äº†æ”¯æŒå¤šç§æœç´¢æ¨¡å¼çš„é«˜çº§æœç´¢ç®—æ³•ï¼ŒåŒ…æ‹¬ç®€å•æœç´¢ã€æ¨¡ç³ŠåŒ¹é…ã€æ­£åˆ™è¡¨è¾¾å¼å’Œé«˜çº§æœç´¢è¡¨è¾¾å¼è§£æã€‚

## âœ… å·²å®ç°åŠŸèƒ½

### 1. æœç´¢æ¨¡å¼

#### ç®€å•æœç´¢ (Simple Search)
- **åŠŸèƒ½**: åŸºç¡€çš„æ–‡æœ¬åŒ¹é…æœç´¢
- **ç‰¹æ€§**: 
  - æ”¯æŒåŒºåˆ†å¤§å°å†™é€‰é¡¹
  - æ”¯æŒå…¨è¯åŒ¹é…é€‰é¡¹
  - åœ¨æ ‡ç­¾ç»„åç§°ã€æ ‡ç­¾æ ‡é¢˜å’ŒURLä¸­æœç´¢
- **ä½¿ç”¨åœºæ™¯**: æ—¥å¸¸å¿«é€Ÿæœç´¢

#### æ¨¡ç³ŠåŒ¹é… (Fuzzy Search)
- **ç®—æ³•**: åŸºäºç¼–è¾‘è·ç¦»ï¼ˆLevenshteinè·ç¦»ï¼‰çš„ç›¸ä¼¼åº¦è®¡ç®—
- **ç‰¹æ€§**:
  - å¯é…ç½®ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.1-1.0ï¼‰
  - å®¹é”™æ€§å¼ºï¼Œæ”¯æŒæ‹¼å†™é”™è¯¯
  - æ™ºèƒ½ç›¸å…³æ€§è¯„åˆ†
- **ä½¿ç”¨åœºæ™¯**: è®°ä¸æ¸…ç¡®åˆ‡å…³é”®è¯æ—¶çš„æœç´¢

#### æ­£åˆ™è¡¨è¾¾å¼æœç´¢ (Regex Search)
- **åŠŸèƒ½**: æ”¯æŒå®Œæ•´çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•
- **ç‰¹æ€§**:
  - æ”¯æŒå¤æ‚çš„æ¨¡å¼åŒ¹é…
  - è‡ªåŠ¨é”™è¯¯å¤„ç†ï¼Œæ— æ•ˆæ­£åˆ™å›é€€åˆ°ç®€å•æœç´¢
  - æ”¯æŒåŒºåˆ†å¤§å°å†™é€‰é¡¹
- **ä½¿ç”¨åœºæ™¯**: é«˜çº§ç”¨æˆ·çš„ç²¾ç¡®æœç´¢éœ€æ±‚

#### é«˜çº§æœç´¢è¡¨è¾¾å¼ (Advanced Search)
- **åŠŸèƒ½**: æ”¯æŒç»“æ„åŒ–æœç´¢è¡¨è¾¾å¼
- **è¯­æ³•**:
  ```
  title:å…³é”®è¯          # åœ¨æ ‡é¢˜ä¸­æœç´¢
  url:å…³é”®è¯           # åœ¨URLä¸­æœç´¢
  domain:example.com   # æŒ‰åŸŸåæœç´¢
  group:ç»„å           # æŒ‰æ ‡ç­¾ç»„åæœç´¢
  locked:true/false    # æŒ‰é”å®šçŠ¶æ€æœç´¢
  tabs:>10            # æ ‡ç­¾æ•°é‡å¤§äº10
  tabs:5..20          # æ ‡ç­¾æ•°é‡åœ¨5-20ä¹‹é—´
  date:2024-01-01     # æŒ‰åˆ›å»ºæ—¥æœŸæœç´¢
  date:2024-01-01..2024-12-31  # æ—¥æœŸèŒƒå›´æœç´¢
  mode:fuzzy          # æŒ‡å®šæœç´¢æ¨¡å¼
  fuzzy:0.8           # è®¾ç½®æ¨¡ç³ŠåŒ¹é…é˜ˆå€¼
  regex:pattern       # æ­£åˆ™è¡¨è¾¾å¼æœç´¢
  ```

### 2. è¿‡æ»¤åŠŸèƒ½

#### åŸºç¡€è¿‡æ»¤å™¨
- **æ ‡ç­¾ç»„åç§°**: æŒ‰æ ‡ç­¾ç»„åç§°è¿‡æ»¤
- **åŸŸå**: æŒ‰ç½‘ç«™åŸŸåè¿‡æ»¤
- **é”å®šçŠ¶æ€**: æŒ‰æ ‡ç­¾ç»„é”å®šçŠ¶æ€è¿‡æ»¤
- **æ—¥æœŸèŒƒå›´**: æŒ‰åˆ›å»º/æ›´æ–°æ—¶é—´è¿‡æ»¤

#### é«˜çº§è¿‡æ»¤å™¨
- **æ ‡ç­¾æ•°é‡**: æ”¯æŒèŒƒå›´è¿‡æ»¤ï¼ˆæœ€å°å€¼ã€æœ€å¤§å€¼ã€èŒƒå›´ï¼‰
- **å›¾æ ‡çŠ¶æ€**: æŒ‰æ˜¯å¦æœ‰ç½‘ç«™å›¾æ ‡è¿‡æ»¤
- **æ ‡ç­¾æ ‡è®°**: æŒ‰è‡ªå®šä¹‰æ ‡ç­¾è¿‡æ»¤ï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰

### 3. æ’åºåŠŸèƒ½

#### æ’åºå­—æ®µ
- **ç›¸å…³æ€§**: åŸºäºåŒ¹é…åº¦å’Œç›¸ä¼¼åº¦çš„æ™ºèƒ½æ’åº
- **æ—¥æœŸ**: æŒ‰åˆ›å»ºæˆ–æ›´æ–°æ—¶é—´æ’åº
- **åç§°**: æŒ‰æ ‡ç­¾ç»„æˆ–æ ‡ç­¾åç§°å­—æ¯é¡ºåºæ’åº
- **åŸŸå**: æŒ‰ç½‘ç«™åŸŸåæ’åº
- **æ ‡ç­¾æ•°é‡**: æŒ‰æ ‡ç­¾ç»„åŒ…å«çš„æ ‡ç­¾æ•°é‡æ’åº

#### æ’åºæ–¹å‘
- **å‡åº**: ä»å°åˆ°å¤§æ’åº
- **é™åº**: ä»å¤§åˆ°å°æ’åº

### 4. æœç´¢å†å²ç®¡ç†

#### å†å²è®°å½•åŠŸèƒ½
- **è‡ªåŠ¨ä¿å­˜**: è‡ªåŠ¨ä¿å­˜æœç´¢æŸ¥è¯¢å’Œç»“æœç»Ÿè®¡
- **å»é‡å¤„ç†**: ç›¸åŒæŸ¥è¯¢è‡ªåŠ¨åˆå¹¶ï¼Œæ›´æ–°æ—¶é—´æˆ³
- **å®¹é‡é™åˆ¶**: æœ€å¤šä¿å­˜100æ¡å†å²è®°å½•
- **æ”¶è—åŠŸèƒ½**: æ”¯æŒæ”¶è—å¸¸ç”¨æœç´¢æŸ¥è¯¢

#### æœç´¢ç»Ÿè®¡
- **æ€»æœç´¢æ¬¡æ•°**: ç»Ÿè®¡ç”¨æˆ·æœç´¢è¡Œä¸º
- **å¹³å‡æ‰§è¡Œæ—¶é—´**: ç›‘æ§æœç´¢æ€§èƒ½
- **çƒ­é—¨å…³é”®è¯**: ç»Ÿè®¡æœ€å¸¸ç”¨çš„æœç´¢å…³é”®è¯
- **å¸¸ç”¨è¿‡æ»¤å™¨**: ç»Ÿè®¡æœ€å¸¸ç”¨çš„è¿‡æ»¤æ¡ä»¶
- **æœç´¢æ¨¡å¼ä½¿ç”¨**: ç»Ÿè®¡å„ç§æœç´¢æ¨¡å¼çš„ä½¿ç”¨é¢‘ç‡

### 5. æœç´¢å»ºè®®

#### æ™ºèƒ½å»ºè®®
- **å†å²å»ºè®®**: åŸºäºæœç´¢å†å²çš„å…³é”®è¯å»ºè®®
- **å†…å®¹å»ºè®®**: åŸºäºç°æœ‰æ ‡ç­¾ç»„å’Œæ ‡ç­¾çš„å»ºè®®
- **æ¨¡ç³Šå»ºè®®**: æ”¯æŒæ¨¡ç³ŠåŒ¹é…çš„å»ºè®®ç”Ÿæˆ
- **å®æ—¶æ›´æ–°**: è¾“å…¥æ—¶å®æ—¶ç”Ÿæˆå»ºè®®

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®—æ³•

#### ç¼–è¾‘è·ç¦»è®¡ç®—
```typescript
private calculateEditDistance(str1: string, str2: string): number {
  // åŠ¨æ€è§„åˆ’å®ç°Levenshteinè·ç¦»
  const matrix = Array(str2.length + 1).fill(null)
    .map(() => Array(str1.length + 1).fill(null));
  
  // åˆå§‹åŒ–è¾¹ç•Œæ¡ä»¶
  for (let i = 0; i <= str1.length; i++) matrix[0][i] = i;
  for (let j = 0; j <= str2.length; j++) matrix[j][0] = j;
  
  // å¡«å……çŸ©é˜µ
  for (let j = 1; j <= str2.length; j++) {
    for (let i = 1; i <= str1.length; i++) {
      const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;
      matrix[j][i] = Math.min(
        matrix[j][i - 1] + 1,     // deletion
        matrix[j - 1][i] + 1,     // insertion
        matrix[j - 1][i - 1] + indicator // substitution
      );
    }
  }
  
  return matrix[str2.length][str1.length];
}
```

#### ç›¸ä¼¼åº¦è®¡ç®—
```typescript
private calculateSimilarity(str1: string, str2: string): number {
  const maxLength = Math.max(str1.length, str2.length);
  if (maxLength === 0) return 1;
  
  const distance = this.calculateEditDistance(str1, str2);
  return (maxLength - distance) / maxLength;
}
```

#### ç›¸å…³æ€§è¯„åˆ†
- **ç²¾ç¡®åŒ¹é…**: 100åˆ†
- **éƒ¨åˆ†åŒ¹é…**: 50åˆ† + é•¿åº¦æ¯”ä¾‹åˆ†
- **æ¨¡ç³ŠåŒ¹é…**: ç›¸ä¼¼åº¦ Ã— 100åˆ†
- **æ­£åˆ™åŒ¹é…**: å›ºå®š80åˆ†
- **URLåŒ¹é…**: 30åˆ†

### æ€§èƒ½ä¼˜åŒ–

#### æœç´¢æ€§èƒ½
- **é˜²æŠ–å¤„ç†**: æœç´¢å»ºè®®ä½¿ç”¨300msé˜²æŠ–
- **ç»“æœç¼“å­˜**: ç›¸åŒæŸ¥è¯¢ç»“æœç¼“å­˜
- **åˆ†é¡µæ”¯æŒ**: å¤§ç»“æœé›†åˆ†é¡µæ˜¾ç¤º
- **å¼‚æ­¥å¤„ç†**: é¿å…é˜»å¡UIçº¿ç¨‹

#### å†…å­˜ä¼˜åŒ–
- **å†å²é™åˆ¶**: é™åˆ¶å†å²è®°å½•æ•°é‡
- **æ™ºèƒ½æ¸…ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
- **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½æœç´¢å»ºè®®

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æœç´¢æ€§èƒ½
- **ç®€å•æœç´¢**: < 10ms (1000ä¸ªæ ‡ç­¾ç»„)
- **æ¨¡ç³Šæœç´¢**: < 50ms (1000ä¸ªæ ‡ç­¾ç»„)
- **æ­£åˆ™æœç´¢**: < 30ms (1000ä¸ªæ ‡ç­¾ç»„)
- **é«˜çº§æœç´¢**: < 100ms (å¤æ‚è¡¨è¾¾å¼)

### å‡†ç¡®æ€§æŒ‡æ ‡
- **ç²¾ç¡®åŒ¹é…**: 100%å‡†ç¡®ç‡
- **æ¨¡ç³ŠåŒ¹é…**: 85%+ç›¸å…³æ€§
- **æœç´¢å»ºè®®**: 90%+æœ‰ç”¨æ€§

## ğŸ¨ ç”¨æˆ·ç•Œé¢

### é«˜çº§æœç´¢é¢æ¿
- **æœç´¢æ¨¡å¼é€‰æ‹©**: å•é€‰æŒ‰é’®åˆ‡æ¢æœç´¢æ¨¡å¼
- **æ¨¡ç³ŠåŒ¹é…é˜ˆå€¼**: æ»‘å—è°ƒèŠ‚ç›¸ä¼¼åº¦è¦æ±‚
- **æœç´¢é€‰é¡¹**: å¤é€‰æ¡†æ§åˆ¶åŒºåˆ†å¤§å°å†™ã€å…¨è¯åŒ¹é…
- **è¿‡æ»¤æ¡ä»¶**: è¾“å…¥æ¡†è®¾ç½®å„ç§è¿‡æ»¤å™¨
- **æœç´¢å†å²**: æŠ˜å é¢æ¿æ˜¾ç¤ºå†å²æœç´¢
- **å®æ—¶å»ºè®®**: ä¸‹æ‹‰åˆ—è¡¨æ˜¾ç¤ºæœç´¢å»ºè®®

### æœç´¢ç»“æœæ˜¾ç¤º
- **åˆ†ç±»æ˜¾ç¤º**: æ ‡ç­¾ç»„å’Œæ ‡ç­¾åˆ†åˆ«æ˜¾ç¤º
- **ç›¸å…³æ€§é«˜äº®**: åŒ¹é…å…³é”®è¯é«˜äº®æ˜¾ç¤º
- **ç»Ÿè®¡ä¿¡æ¯**: æ˜¾ç¤ºæœç´¢ç»“æœæ•°é‡å’Œæ‰§è¡Œæ—¶é—´
- **æ’åºæ§åˆ¶**: ä¸‹æ‹‰èœå•é€‰æ‹©æ’åºæ–¹å¼

## ğŸ§ª æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•
- **æœç´¢ç®—æ³•**: å„ç§æœç´¢æ¨¡å¼çš„åŠŸèƒ½æµ‹è¯•
- **è¿‡æ»¤å™¨**: æ‰€æœ‰è¿‡æ»¤æ¡ä»¶çš„æµ‹è¯•
- **æ’åº**: å„ç§æ’åºæ–¹å¼çš„æµ‹è¯•
- **è¡¨è¾¾å¼è§£æ**: é«˜çº§æœç´¢è¡¨è¾¾å¼è§£ææµ‹è¯•
- **é”™è¯¯å¤„ç†**: å¼‚å¸¸æƒ…å†µçš„å¤„ç†æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- **å¤§æ•°æ®é›†**: 1000+æ ‡ç­¾ç»„çš„æ€§èƒ½æµ‹è¯•
- **å¤æ‚æŸ¥è¯¢**: å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢çš„æ€§èƒ½æµ‹è¯•
- **å†…å­˜ä½¿ç”¨**: é•¿æ—¶é—´ä½¿ç”¨çš„å†…å­˜æ³„æ¼æµ‹è¯•

## ğŸ”® æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½
1. **è¯­ä¹‰æœç´¢**: åŸºäºå†…å®¹ç†è§£çš„æ™ºèƒ½æœç´¢
2. **æœç´¢å¿«æ·é”®**: é”®ç›˜å¿«æ·é”®æ”¯æŒ
3. **æœç´¢æ¨¡æ¿**: é¢„å®šä¹‰çš„æœç´¢æ¨¡æ¿
4. **æœç´¢åˆ†æ**: æ›´è¯¦ç»†çš„æœç´¢è¡Œä¸ºåˆ†æ
5. **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒå¤šè¯­è¨€æœç´¢

### æŠ€æœ¯æ”¹è¿›
1. **Web Workers**: å¤§æ•°æ®æœç´¢ä½¿ç”¨Web Workers
2. **ç´¢å¼•ä¼˜åŒ–**: å»ºç«‹å€’æ’ç´¢å¼•æå‡æœç´¢é€Ÿåº¦
3. **æœºå™¨å­¦ä¹ **: åŸºäºç”¨æˆ·è¡Œä¸ºä¼˜åŒ–æœç´¢ç»“æœ
4. **äº‘ç«¯åŒæ­¥**: æœç´¢å†å²äº‘ç«¯åŒæ­¥

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æœç´¢
```typescript
const query: SearchQuery = {
  keyword: 'github',
  mode: SearchMode.SIMPLE,
  filters: {},
  sortBy: 'relevance',
  sortOrder: 'desc'
};

const result = await searchService.search(groups, query);
```

### æ¨¡ç³Šæœç´¢
```typescript
const query: SearchQuery = {
  keyword: 'developmnt', // æ‹¼å†™é”™è¯¯
  mode: SearchMode.FUZZY,
  fuzzyThreshold: 0.7,
  filters: {},
  sortBy: 'relevance',
  sortOrder: 'desc'
};
```

### é«˜çº§æœç´¢è¡¨è¾¾å¼
```typescript
const expression = 'domain:github.com locked:false tabs:>5';
const result = await searchService.advancedSearch(groups, expression);
```

### æœç´¢å†å²ç®¡ç†
```typescript
// æ·»åŠ æœç´¢å†å²
await searchHistoryService.addSearchHistory(query, resultCount, executionTime);

// è·å–æœç´¢å»ºè®®
const suggestions = await searchHistoryService.getSearchSuggestions('dev', 5);

// è·å–æœç´¢ç»Ÿè®¡
const stats = await searchHistoryService.getSearchStatistics();
```
