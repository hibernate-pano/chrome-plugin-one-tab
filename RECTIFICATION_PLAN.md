# 项目整改清单（v1.9.1 之后）

## 优先级指南
- P0：立刻处理，影响合规或核心功能
- P1：高影响，短期可完成
- P2：中影响，可排期
- P3：低影响或长期优化

## 优先任务
1. **权限最小化与合规（P0）**
   - 确认 manifest 权限与实际使用一致（已移除 `identity`，持续复核）。
   - 更新商店权限说明与隐私实践文档。
   - 精简 CSP 域名，仅保留必须的 Supabase 域。

2. **数据与同步可靠性（P1）**
   - 统一 tab 数据模型（分组/标签/状态），规划 localStorage → indexedDB 迁移。
   - 批量操作加事务/幂等重试；失败回滚与用户提示。
   - 自动快照与导入/导出校验，防止数据丢失。

3. **性能与大数据量场景（P1）**
   - 高频事件 debounce/限流；后台队列化批量任务。
   - 大列表性能基准（1k+ tabs）：虚拟化、拖拽排序、搜索过滤性能测试。
   - 搜索/过滤增加缓存与可取消请求（abortable fetch）。

4. **安全与通信（P1）**
   - 外链/图片 URL 校验与协议过滤；可选数据加密。
   - 统一 fetch 包装：超时、重试、错误分类。
   - CSP 复核，移除多余来源；背景页最小暴露。

5. **UI/UX 与可访问性（P2）**
   - 多选/批量操作的状态反馈（进度条/骨架）。
   - 搜索结果高亮、空状态示例与快捷导入。
   - 键盘操作与 ARIA 补齐；高对比度与“减少动画”选项。

6. **观测性与日志（P2）**
   - 埋点主要操作：保存、批量删除、搜索、拖拽、失败原因。
   - “诊断导出”按钮（不含敏感数据）便于用户反馈。

7. **测试与发布（P2）**
   - 集成测试：service worker 事件、批量保存/删除、搜索、拖拽、快捷键。
   - 性能回归脚本（大数据量）。
   - CI 增加 lint/test/build/package；产出可直接上传商店的 zip。

8. **国际化与文案（P3）**
   - 引入 i18n（如 i18next），维护中/英文文案统一。
   - 权限、隐私、错误提示的标准化文案。

## 里程碑建议（示例）
- M1（本周）：完成 P0、启动 P1 的数据可靠性与性能基准。
- M2（下周）：落地 P1 剩余项；上线 UI/UX 最小可用改进。
- M3（两周内）：完成 P2；准备商店物料与发布流程自动化。

